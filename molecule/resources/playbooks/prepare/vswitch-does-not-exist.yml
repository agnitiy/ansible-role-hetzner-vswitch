---
- name: Prepare Hetzner Robot Mock API
  hosts: localhost
  tasks:
    - name: Run Hetzner Robot Mock API Container
      shell: docker run -d --rm --network molecule --name hetzner-robot {{ hetzner_vswitch_webservice_mock }}
    - name: Create vSwitch template
      uri:
        url: "{{ hetzner_vswitch_hetzner_robot_api_url }}/vswitch"
        method: POST
        user: "{{ hetzner_vswitch_hetzner_robot_api_user }}"
        password: "{{ hetzner_vswitch_hetzner_robot_api_pass }}"
        status_code: 201
        body:
          vlan: 4300  # We have a vSwitch for other different VLAN.
          name: "sib-mongo-germany"
          id: 3500
          cancelled: false
        force_basic_auth: yes
        body_format: json
